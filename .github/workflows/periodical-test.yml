# ~~ Generated by projen. To modify, edit .projenrc.py and run "npx projen".

name: periodical-test
on:
  workflow_dispatch: {}
  # schedule:
  #  - cron: 5,10,15,20,25,30,35,40,45,50,55 * * * *
concurrency: periodical-test-${{ github.ref }}
jobs:
  run-unit-tests:
    permissions:
      contents: read
    uses: ./.github/workflows/run-unit-tests.yml
    secrets: inherit
  run-system-tests:
    needs: []
    permissions:
      contents: read
    uses: ./.github/workflows/run-system-tests.yml
    with:
      sys_test_env: prod
    secrets: inherit
  notify-on-failure:
    needs:
      - run-unit-tests
      - run-system-tests
    runs-on: ubuntu-latest
    permissions:
      contents: read
    if: ${{ failure() }}
    steps:
      - run: echo "SIMULATING SENDING SLACK MESSAGE ALL TESTS"
      # - uses: slackapi/slack-github-action@v1.24.0
      #   env:
      #     SLACK_WEBHOOK_URL: some.slack.webhook.url.com
